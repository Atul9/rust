language: rust
rust:
  - stable
cache: cargo
script:
  - pushd varlink_parser
  - cargo build --verbose
  - cargo test --verbose
  - cargo run --example validate ../examples/varlink-server-example/src/io.systemd.network.varlink
  - popd
  - pushd varlink
  - cargo build --verbose
  - cargo test --verbose
  - cargo run --bin varlink-rust-generator ../examples/varlink-server-example/src/io.systemd.network.varlink
  - popd
  - pushd examples/varlink-server-example
  - cargo build --verbose
  - cargo test --verbose
  - popd
